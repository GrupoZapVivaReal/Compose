<!DOCTYPE html>
<html lang='en'>
  <head>
    <title>Building UI  Reference</title>
    <link rel='stylesheet' type='text/css' href='css/jazzy.css' />
    <link rel='stylesheet' type='text/css' href='css/highlight.css' />
    <meta charset='utf-8'>
    <script src='js/jquery.min.js' defer></script>
    <script src='js/jazzy.js' defer></script>
  </head>
  <body>


    <a title='Building UI  Reference'></a>

    <header class='header'>
      <p class='header-col header-col--primary'>
        <a class='header-link' href='index.html'>
          Compose Docs
        </a>
         (92% documented)
      </p>
    
        <p class='header-col header-col--secondary'>
          <a class='header-link' href='http://github.com/vivalreal/Compose'>
            <img class='header-icon' src='img/gh.png'/>
            View on GitHub
          </a>
        </p>
    
    </header>

    <p class='breadcrumbs'>
      <a class='breadcrumb' href='index.html'>Compose Reference</a>
      <img class='carat' src='img/carat.png' />
      Building UI  Reference
    </p>

    <div class='content-wrapper'>
      <nav class='navigation'>
        <ul class='nav-groups'>
          <li class='nav-group-name'>
            <a class='nav-group-name-link' href='Guides.html'>Guides</a>
            <ul class='nav-group-tasks'>
              <li class='nav-group-task'>
                <a class='nav-group-task-link' href='introduction.html'>Introduction</a>
              </li>
              <li class='nav-group-task'>
                <a class='nav-group-task-link' href='composingunit-api.html'>ComposingUnit API</a>
              </li>
              <li class='nav-group-task'>
                <a class='nav-group-task-link' href='building-ui.html'>Building UI</a>
              </li>
            </ul>
          </li>
          <li class='nav-group-name'>
            <a class='nav-group-name-link' href='Composing Unit.html'>Composing Unit</a>
            <ul class='nav-group-tasks'>
              <li class='nav-group-task'>
                <a class='nav-group-task-link' href='Protocols/ComposingUnit.html'>ComposingUnit</a>
              </li>
              <li class='nav-group-task'>
                <a class='nav-group-task-link' href='Structs/DimensionUnit.html'>DimensionUnit</a>
              </li>
              <li class='nav-group-task'>
                <a class='nav-group-task-link' href='Protocols/TypedUnit.html'>TypedUnit</a>
              </li>
            </ul>
          </li>
          <li class='nav-group-name'>
            <a class='nav-group-name-link' href='Container.html'>Container</a>
            <ul class='nav-group-tasks'>
              <li class='nav-group-task'>
                <a class='nav-group-task-link' href='Protocols/ComposingContainer.html'>ComposingContainer</a>
              </li>
              <li class='nav-group-task'>
                <a class='nav-group-task-link' href='Enums/ComposingContainerDirection.html'>ComposingContainerDirection</a>
              </li>
            </ul>
          </li>
          <li class='nav-group-name'>
            <a class='nav-group-name-link' href='Collections.html'>Collections</a>
            <ul class='nav-group-tasks'>
              <li class='nav-group-task'>
                <a class='nav-group-task-link' href='Classes/CollectionStackView.html'>CollectionStackView</a>
              </li>
              <li class='nav-group-task'>
                <a class='nav-group-task-link' href='Classes/ComposingCollectionView.html'>ComposingCollectionView</a>
              </li>
              <li class='nav-group-task'>
                <a class='nav-group-task-link' href='Classes/ComposingUnitCollectionViewCell.html'>ComposingUnitCollectionViewCell</a>
              </li>
            </ul>
          </li>
          <li class='nav-group-name'>
            <a class='nav-group-name-link' href='Table.html'>Table</a>
            <ul class='nav-group-tasks'>
              <li class='nav-group-task'>
                <a class='nav-group-task-link' href='Classes/TableStackView.html'>TableStackView</a>
              </li>
              <li class='nav-group-task'>
                <a class='nav-group-task-link' href='Classes/ComposingTableView.html'>ComposingTableView</a>
              </li>
              <li class='nav-group-task'>
                <a class='nav-group-task-link' href='Classes/ComposingUnitTableViewCell.html'>ComposingUnitTableViewCell</a>
              </li>
            </ul>
          </li>
          <li class='nav-group-name'>
            <a class='nav-group-name-link' href='Extending Units.html'>Extending Units</a>
            <ul class='nav-group-tasks'>
              <li class='nav-group-task'>
                <a class='nav-group-task-link' href='Protocols/SelectableUnit.html'>SelectableUnit</a>
              </li>
              <li class='nav-group-task'>
                <a class='nav-group-task-link' href='Protocols/TwoStepDisplayUnit.html'>TwoStepDisplayUnit</a>
              </li>
              <li class='nav-group-task'>
                <a class='nav-group-task-link' href='Protocols/HighlightableUnit.html'>HighlightableUnit</a>
              </li>
            </ul>
          </li>
          <li class='nav-group-name'>
            <a class='nav-group-name-link' href='ViewUnit.html'>ViewUnit</a>
            <ul class='nav-group-tasks'>
              <li class='nav-group-task'>
                <a class='nav-group-task-link' href='Structs/ViewUnit.html'>ViewUnit</a>
              </li>
              <li class='nav-group-task'>
                <a class='nav-group-task-link' href='Enums/ViewTraits.html'>ViewTraits</a>
              </li>
            </ul>
          </li>
          <li class='nav-group-name'>
            <a class='nav-group-name-link' href='Conditional Array.html'>Conditional Array</a>
            <ul class='nav-group-tasks'>
              <li class='nav-group-task'>
                <a class='nav-group-task-link' href='Extensions/Array.html'>Array</a>
              </li>
            </ul>
          </li>
          <li class='nav-group-name'>
            <a class='nav-group-name-link' href='UIKit Extensions.html'>UIKit Extensions</a>
            <ul class='nav-group-tasks'>
              <li class='nav-group-task'>
                <a class='nav-group-task-link' href='Extensions/UICollectionViewCell.html'>UICollectionViewCell</a>
              </li>
              <li class='nav-group-task'>
                <a class='nav-group-task-link' href='Extensions/UITableViewCell.html'>UITableViewCell</a>
              </li>
              <li class='nav-group-task'>
                <a class='nav-group-task-link' href='Extensions/UIEdgeInsets.html'>UIEdgeInsets</a>
              </li>
              <li class='nav-group-task'>
                <a class='nav-group-task-link' href='Extensions/UIView.html'>UIView</a>
              </li>
            </ul>
          </li>
          <li class='nav-group-name'>
            <a class='nav-group-name-link' href='Sample Units.html'>Sample Units</a>
            <ul class='nav-group-tasks'>
              <li class='nav-group-task'>
                <a class='nav-group-task-link' href='Structs/CollectionStackUnit.html'>CollectionStackUnit</a>
              </li>
              <li class='nav-group-task'>
                <a class='nav-group-task-link' href='Structs/LabelUnit.html'>LabelUnit</a>
              </li>
            </ul>
          </li>
        </ul>
      </nav>
      <article class='main-content'>

        <section class='section'>
          <div class='section-content'>
            
            <a href='#composing-your-ui-with-composingunits' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h1 id='composing-your-ui-with-composingunits'>Composing your UI with ComposingUnits</h1>

<p>Learn how to bring together many units to build your UI</p>
<a href='#deciding-which-units-we-are-going-to-display' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h3 id='deciding-which-units-we-are-going-to-display'>Deciding which units we are going to display</h3>

<p>It is really common to see some code like this:</p>
<pre class="highlight swift"><code><span class="kd">func</span> <span class="nf">collectionView</span><span class="p">(</span><span class="nv">collectionView</span><span class="p">:</span> <span class="kt">UICollectionView</span><span class="p">,</span> <span class="n">numberOfItemsInSection</span> <span class="nv">section</span><span class="p">:</span> <span class="kt">Int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">Int</span> <span class="p">{</span>
    <span class="k">if</span> <span class="n">data</span><span class="o">.</span><span class="n">hasName</span> <span class="p">{</span>
        <span class="k">if</span> <span class="n">data</span><span class="o">.</span><span class="n">hasOtherValue</span> <span class="p">{</span>
            <span class="k">return</span> <span class="mi">4</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="mi">3</span>
    <span class="p">}</span>
    <span class="k">else</span> <span class="p">{</span>
        <span class="k">if</span> <span class="n">otherData</span><span class="o">.</span><span class="n">validInfo</span> <span class="p">{</span>
            <span class="k">return</span> <span class="mi">2</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="mi">1</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre>

<p>There is nothing wrong here, but it is really easy to miss some logic and instead of returning 4 items (like in the first if) we ended returning just 3.</p>

<p>To solve this kind of issue we added some methods to <a href="Array.html">Array</a> that make really easy to see in which condition all items are going to be displayed:</p>
<pre class="highlight swift"><code><span class="k">var</span> <span class="nv">items</span><span class="p">:</span> <span class="p">[</span><span class="kt">ComposingUnit</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">items</span><span class="o">.</span><span class="n">add</span> <span class="p">{</span>
    <span class="k">let</span> <span class="nv">headerUnit</span> <span class="o">=</span> <span class="kt">HeaderUnit</span><span class="p">(</span><span class="nv">text</span><span class="p">:</span><span class="s">"This is my header"</span><span class="p">)</span>
    <span class="k">return</span> <span class="p">[</span><span class="n">headerUnit</span><span class="p">]</span>
<span class="p">}</span>
<span class="n">items</span><span class="o">.</span><span class="nf">add</span><span class="p">(</span><span class="nv">manyIf</span><span class="p">:</span> <span class="n">data</span><span class="o">.</span><span class="n">hasOtherValue</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">let</span> <span class="nv">EmptyViewUnit</span> <span class="o">=</span> <span class="kt">EmptyViewUnit</span><span class="p">(</span><span class="nv">height</span><span class="p">:</span> <span class="mi">10</span><span class="p">)</span>
    <span class="k">let</span> <span class="nv">selectorUnit</span> <span class="o">=</span> <span class="kt">ChooseAgeUnit</span><span class="p">(</span><span class="nv">minAge</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span> <span class="nv">maxAge</span><span class="p">:</span> <span class="mi">100</span><span class="p">,</span> <span class="nv">callback</span><span class="p">:</span><span class="k">self</span><span class="o">.</span><span class="nf">ageChanged</span><span class="p">(</span><span class="nv">newAge</span><span class="p">:))</span>
    <span class="k">return</span> <span class="p">[</span><span class="kt">EmptyViewUnit</span><span class="p">,</span> <span class="n">selectorUnit</span><span class="p">]</span>
<span class="p">}</span>
<span class="n">items</span><span class="o">.</span><span class="nf">add</span><span class="p">(</span><span class="nv">if</span><span class="p">:</span> <span class="n">otherData</span><span class="o">.</span><span class="n">validInfo</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">let</span> <span class="nv">otherUnit</span> <span class="o">=</span> <span class="kt">SomeDataUnit</span><span class="p">(</span><span class="nv">data1</span><span class="p">:</span><span class="s">"Some text"</span><span class="p">,</span> <span class="nv">height</span><span class="p">:</span> <span class="mi">240</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">otherUnit</span>
<span class="p">}</span>

<span class="n">myContainer</span><span class="o">.</span><span class="n">state</span> <span class="o">=</span> <span class="n">items</span>
</code></pre>
<a href='#and-that-is-it-you-have-all-the-conditions-for-each-unit-to-be-visible' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h6 id='and-that-is-it-you-have-all-the-conditions-for-each-unit-to-be-visible'>And that is it. You have all the conditions for each unit to be visible.</h6>

<p>If you later need to update the condition for your otherUnit to be visible, you don&rsquo;t mess up with the rest of the units, and adding a new item is also a breeze:</p>
<pre class="highlight swift"><code><span class="k">var</span> <span class="nv">items</span><span class="p">:</span> <span class="p">[</span><span class="kt">ComposingUnit</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">items</span><span class="o">.</span><span class="n">add</span> <span class="p">{</span>
    <span class="k">let</span> <span class="nv">headerUnit</span> <span class="o">=</span> <span class="kt">HeaderUnit</span><span class="p">(</span><span class="nv">text</span><span class="p">:</span><span class="s">"This is my header"</span><span class="p">)</span>
    <span class="k">return</span> <span class="p">[</span><span class="n">headerUnit</span><span class="p">]</span>
<span class="p">}</span>
</code></pre>

<p>adding new data:</p>
<pre class="highlight swift"><code><span class="n">items</span><span class="o">.</span><span class="nf">add</span><span class="p">(</span><span class="nv">ifLet</span><span class="p">:</span> <span class="n">data</span><span class="o">.</span><span class="n">someOptinalArray</span><span class="p">)</span> <span class="p">{</span> <span class="n">sizes</span> <span class="k">in</span>
    <span class="k">let</span> <span class="nv">sizeSelectorUnit</span> <span class="o">=</span> <span class="kt">SizeSelectorUnit</span><span class="p">(</span><span class="nv">avaliableSizes</span><span class="p">:</span><span class="n">sizes</span><span class="p">)</span>
    <span class="k">return</span> <span class="p">[</span><span class="n">sizeSelectorUnit</span><span class="p">]</span>
<span class="p">}</span>
</code></pre>
<pre class="highlight swift"><code><span class="n">items</span><span class="o">.</span><span class="nf">add</span><span class="p">(</span><span class="nv">manyIf</span><span class="p">:</span> <span class="n">data</span><span class="o">.</span><span class="n">hasOtherValue</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">let</span> <span class="nv">EmptyViewUnit</span> <span class="o">=</span> <span class="kt">EmptyViewUnit</span><span class="p">(</span><span class="nv">height</span><span class="p">:</span> <span class="mi">10</span><span class="p">)</span>
    <span class="k">let</span> <span class="nv">selectorUnit</span> <span class="o">=</span> <span class="kt">ChooseAgeUnit</span><span class="p">(</span><span class="nv">minAge</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span> <span class="nv">maxAge</span><span class="p">:</span> <span class="mi">100</span><span class="p">,</span> <span class="nv">callback</span><span class="p">:</span><span class="k">self</span><span class="o">.</span><span class="nf">ageChanged</span><span class="p">(</span><span class="nv">newAge</span><span class="p">:))</span>
    <span class="k">return</span> <span class="p">[</span><span class="kt">EmptyViewUnit</span><span class="p">,</span> <span class="n">selectorUnit</span><span class="p">]</span>
<span class="p">}</span>
</code></pre>

<p>change how we add this field:</p>
<pre class="highlight swift"><code><span class="n">items</span><span class="o">.</span><span class="nf">add</span><span class="p">(</span><span class="nv">if</span><span class="p">:</span> <span class="n">otherData</span><span class="o">.</span><span class="n">validInfo</span> <span class="o">&amp;&amp;</span> <span class="n">data</span><span class="o">.</span><span class="n">hasWeirdContext</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">let</span> <span class="nv">otherUnit</span> <span class="o">=</span> <span class="kt">SomeDataUnit</span><span class="p">(</span><span class="nv">data1</span><span class="p">:</span><span class="s">"Some text"</span><span class="p">,</span> <span class="nv">height</span><span class="p">:</span> <span class="mi">240</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">otherUnit</span>
<span class="p">}</span>
</code></pre>
<pre class="highlight swift"><code><span class="n">myContainer</span><span class="o">.</span><span class="n">state</span> <span class="o">=</span> <span class="n">items</span>
</code></pre>

          </div>
        </section>


      </article>
    </div>
    <section class='footer'>
      <p>© 2016 <a class="link" href="https://github.com/vivareal" target="_blank" rel="external">VivaReal</a>. All rights reserved.</p>
      <p>Generated by <a class='link' href='https://github.com/realm/jazzy' target='_blank' rel='external'>jazzy ♪♫ v0.7.2</a>, a <a class='link' href='http://realm.io' target='_blank' rel='external'>Realm</a> project.</p>
    </section>
  </body>
</div>
</html>
